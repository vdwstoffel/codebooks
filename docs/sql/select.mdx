---
sidebar_label: "SELECT"
sidebar_position: 3
---

# SELECT Statement

The `SELECT` statement is the most commonly used command in SQL. It allows you to retrieve data from one or more tables in a database. The flexibility of `SELECT` makes it a powerful tool for data analysis and reporting.

## Basic Syntax

- **Select All Columns:**
  To retrieve all columns from a table, use the `*` wildcard.
  ```sql
  SELECT * FROM "users";
  ```

- **Select Specific Columns:**
  To retrieve specific columns, list their names after the `SELECT` keyword.
  ```sql
  SELECT "name", "email" FROM "users";
  ```

## Filtering with `WHERE`

The `WHERE` clause is used to filter records and extract only those that fulfill a specified condition.

- **Single Condition:**
  ```sql
  SELECT * FROM "users" WHERE "age" > 30;
  ```

- **Multiple Conditions (`AND`, `OR`):**
  ```sql
  SELECT * FROM "users" WHERE "subscribed" = 'false' AND "age" < 40;
  ```

- **Ranges (`BETWEEN`):**
  ```sql
  SELECT * FROM "users" WHERE "age" BETWEEN 18 AND 30;
  ```

## Sorting with `ORDER BY`

The `ORDER BY` keyword is used to sort the result set in ascending or descending order.

- **Ascending Order:**
  ```sql
  SELECT * FROM "users" ORDER BY "name" ASC;
  ```

- **Descending Order:**
  ```sql
  SELECT * FROM "users" ORDER BY "name" DESC;
  ```

## Limiting Results with `LIMIT`

The `LIMIT` clause is used to specify the maximum number of records to return.

```sql
SELECT * FROM "users" LIMIT 5;
```

## Pattern Matching with `LIKE`

The `LIKE` operator is used in a `WHERE` clause to search for a specified pattern in a column.

- **`%`:** Represents zero, one, or multiple characters.
- **`_`:** Represents a single character.

```sql
-- Select all users with a Gmail account
SELECT * FROM "users" WHERE "email" LIKE '%@gmail.com';

-- Select all users whose name starts with 'J'
SELECT * FROM "users" WHERE "name" LIKE 'J%';
```

## Aggregate Functions

Aggregate functions perform a calculation on a set of values and return a single value.

- **`COUNT()`:** Returns the number of rows.
  ```sql
  SELECT COUNT(*) FROM "users";
  ```

- **`SUM()`:** Returns the total sum of a numeric column.
  ```sql
  SELECT SUM("age") FROM "users";
  ```

- **`AVG()`:** Returns the average value of a numeric column.
  ```sql
  SELECT AVG("age") FROM "users";
  ```

- **`MIN()` and `MAX()`:** Return the minimum and maximum values of a column.
  ```sql
  SELECT MIN("age"), MAX("age") FROM "users";
  ```

## Grouping with `GROUP BY`

The `GROUP BY` statement groups rows that have the same values in specified columns into summary rows. It is often used with aggregate functions.

```sql
SELECT
  "age",
  COUNT(*)
FROM "users"
GROUP BY
  "age";
```

## Returning Unique Results with `DISTINCT`

The `DISTINCT` keyword is used to return only unique values in the specified column(s). It eliminates duplicate rows from the result set.

```sql
SELECT DISTINCT
  "city"
FROM "customers";
```

### Selecting Unique Rows Across All Columns

When `DISTINCT` is used with `SELECT *`, it returns unique rows based on the combination of values in all selected columns.

```sql
SELECT DISTINCT
  *
FROM "orders";
```

### Returning All Columns for Distinct Values of a Specific Column

To return all columns for rows that have a distinct value in a specific column (e.g., `city`), you can use a subquery with a window function like `ROW_NUMBER()`. This assigns a sequential integer to each row within a partition, ordered by a specified column. By selecting rows where `ROW_NUMBER()` is 1, you effectively get one row for each distinct value in the partitioned column.

```sql
SELECT
  "customer_id",
  "customer_name",
  "city",
  "country"
FROM
  (
    SELECT
      *,
      ROW_NUMBER() OVER (PARTITION BY "city" ORDER BY "customer_id") as rn
    FROM
      "customers"
  ) AS subquery
WHERE
  rn = 1;
```

In this example, `PARTITION BY "city"` ensures that `ROW_NUMBER()` restarts for each new city, and `ORDER BY "customer_id"` determines which row is selected if there are multiple rows for the same city (it picks the one with the lowest `customer_id`).

## Aliases

SQL aliases are used to give a table or a column in a table a temporary, more readable name.

```sql
SELECT
  "name" AS "user_name",
  "email" AS "user_email"
FROM "users";
```