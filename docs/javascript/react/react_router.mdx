---
sidebar_label: "React Router"
title: "React Router"
sidebar_position: 4
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import BrowserWindow from "@site/src/components/BrowserWindow/BrowserWindow";

# React Router

React Router is a powerful routing library for React that enables declarative navigation in your applications. It allows you to manage application routes, handle URL synchronization, and create a seamless user experience.

To get started, install React Router DOM:

```bash
npm install react-router-dom
```

## Simple Setup

To set up basic routing, you can use `createBrowserRouter` to define your routes and `RouterProvider` to provide the router to your application.

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";

// highlight-next-line
const router = createBrowserRouter([
  // highlight-next-line
  { path: "/", element: <h1>Home Page</h1> },
  // highlight-next-line
  { path: "/menu", element: <h1>Menu Page</h1> },
]);

export default function App() {
  // highlight-next-line
  return <RouterProvider router={router} />;
}
```

## Creating an App Layout with Navbar

React Router allows you to create nested layouts. The `Outlet` component renders the matched child route's element, and `NavLink` is used for navigation links that automatically apply an `active` class when the route matches.

:::info
`NavLink` adds a class `active` to the link when the link is active.

```html
<a aria-current="page" class="active" href="/">Home</a>
<a class="" href="/product">Products</a>
```

:::

:::info
`Link` can also be used instead of `NavLink` to navigate to a different page. `Link` does not apply an `active` class.

```jsx
import { Link } from "react-router-dom";

<Link to="/home">Home</Link>;
```

:::

<Tabs>

<TabItem value="Navbar.jsx">

```jsx
import { NavLink } from "react-router-dom";

export default function Navbar() {
  return (
    <nav>
      {/* highlight-next-line */}
      <NavLink to="/">Home</NavLink>
      {/* highlight-next-line */}
      <NavLink to="/menu">Menu</NavLink>
    </nav>
  );
}
```

</TabItem>
<TabItem value="RootLayout.jsx">

```jsx
import { Outlet } from "react-router-dom";

import Navbar from "./Navbar";

export default function RootLayout() {
  return (
    <>
      <Navbar />
      {/* highlight-next-line */}
      {/* The Outlet component renders the matched child route's element */}
      <Outlet />
    </>
  );
}
```

</TabItem>
<TabItem value="App.jsx">

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";

import RootLayout from "./RootLayout";

const router = createBrowserRouter([
  {
    path: "/",
    element: <RootLayout />,
    children: [
      // highlight-next-line
      { index: true, element: <h1>Home Component</h1> },
      // highlight-next-line
      { path: "/menu", element: <h1>Menu Component</h1> },
    ],
  },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

</TabItem>

</Tabs>

## Adding an Error Boundary Page

React Router allows you to define `errorElement` for routes, which will render when an error occurs during rendering, data loading, or action submission. The `useRouteError` hook provides access to the error that was thrown.

<Tabs>

<TabItem value="Error.jsx">

```jsx
import { useRouteError } from "react-router-dom";

export default function ErrorPage() {
  // highlight-next-line
  const error = useRouteError();

  return (
    <div>
      <h1>Oops!</h1>
      <p>Sorry, an unexpected error has occurred.</p>
      <p>
        <i>{error.status}</i>
        <i>{error.statusText || error.message}</i>
      </p>
    </div>
  );
}
```

</TabItem>
<TabItem value="App.jsx">

```jsx
/* previous imports */
import { createBrowserRouter, RouterProvider } from "react-router-dom";
import Error from "./Error";

const router = createBrowserRouter([
  {
    path: "/",
    element: <h1>Home</h1>,
    // highlight-next-line
    errorElement: <Error />,
  },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

</TabItem>

</Tabs>

## Getting Dynamic Route Parameters

To access dynamic parameters from the URL (e.g., `:id` in `/products/:id`), you can use the `useParams` hook.

<Tabs>

<TabItem value="App.jsx">

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";
import Product from "./Product";

const router = createBrowserRouter([
  {
    // highlight-next-line
    path: "/products/:id",
    element: <Product />,
  },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

</TabItem>
<TabItem value="Product.jsx">

```jsx
// highlight-next-line
import { useParams } from "react-router-dom";

export default function Product() {
  // highlight-next-line
  const { id } = useParams();
  return <h1>Product: {id}</h1>;
}
```

</TabItem>

</Tabs>

<BrowserWindow url="http://localhost:3000/products/3">
  <h1>Product: 3</h1>
</BrowserWindow>

## Getting Query Parameters from the URL

To read query parameters from the URL (e.g., `?name=table`), you can use the `useSearchParams` hook.

```jsx
import { useSearchParams } from "react-router-dom";

export default function Product() {
  // highlight-next-line
  const [searchParams] = useSearchParams();
  // highlight-next-line
  const productName = searchParams.get("name");
  return <h1>Product: {productName}</h1>;
}
```

<BrowserWindow url="http://localhost:3000/products?name=table">
  <h1>Product: table</h1>
</BrowserWindow>

## Setting Query Parameters in the URL

To programmatically set query parameters in the URL, you can use the `setSearchParams` function returned by the `useSearchParams` hook.

```jsx
import { useSearchParams } from "react-router-dom";

export default function User() {
  // highlight-next-line
  const [searchParams, setSearchParams] = useSearchParams();

  const username = searchParams.get("name");
  const age = searchParams.get("age");

  function updateParams() {
    // highlight-next-line
    setSearchParams({ name: "John", age: 50 });
  }

  return (
    <>
      <h1>Username: {username}</h1>
      <h1>Age: {age}</h1>
      <button onClick={updateParams}>Update Params</button>
    </>
  );
}
```

<BrowserWindow url="http://localhost:3000/products?name=default&age=20">
  <h1>Username: default</h1>
  <h1>Age: 20</h1>
  <button>Update Params</button>
</BrowserWindow>

<BrowserWindow url="http://localhost:3000/products?name=John&age=50">
  <h1>Username: John</h1>
  <h1>Age: 50</h1>
  <button>Update Params</button>
</BrowserWindow>

## Navigating Programmatically

`useNavigate` is a hook that returns a navigate function, allowing you to programmatically change the URL.

```jsx title="ProductItems.jsx"
import { useNavigate } from "react-router-dom";

export default function ProductItems() {
  // highlight-next-line
  const navigate = useNavigate();
  return (
    <>
      <h1>Product</h1>
      <button onClick={() => navigate("/products")}>Go to Products</button>
    </>
  );
}
```

## Navigating After a Certain Time

You can combine `useNavigate` with `useEffect` to navigate to a different route after a certain condition is met or a time delay.

```jsx
import { useNavigate, useEffect } from "react-router-dom";

function useLogoutTimer() {
  const userIsInactive = useFakeInactiveUser(); // Assume this hook provides a boolean
  // highlight-next-line
  const navigate = useNavigate();

  // highlight-next-line
  useEffect(() => {
    if (userIsInactive) {
      fake.logout(); // Assume this logs out the user
      // highlight-next-line
      navigate("/login-screen");
    }
  }, [userIsInactive, navigate]); // `navigate` function is stable and won't cause re-renders
}
```

## Redirecting to a Previous Page

The `useNavigate` hook can also be used to navigate back or forward in the browser's history. Pass a negative number to go back, or a positive number to go forward.

```jsx
import { useNavigate } from "react-router-dom";

export default function ProductItems() {
  // highlight-next-line
  const navigate = useNavigate();
  return (
    <>
      <h1>Product</h1>
      {/* highlight-next-line */}
      <button onClick={() => navigate(-1)}>Go back</button>
    </>
  );
}
```

## Fetching Data with Loaders

React Router's `loader` function allows you to fetch data *before* the component renders, ensuring that your component has the necessary data from the start. This is different from `useEffect`, which fetches data after the component has rendered.

<Tabs>

<TabItem value="UserData.jsx">

```jsx
import { useLoaderData } from "react-router-dom";

import { getUsers } from "../../helpers/fakeServer";

export default function UserData() {
  // highlight-next-line
  const users = useLoaderData();
  return (
    <ul>
      {users.map((user) => (
        <li key={user.name}>{user.name}</li>
      ))}
    </ul>
  );
}

// highlight-next-line
export async function loader() {
  // highlight-next-line
  const user = await getUsers();
  // highlight-next-line
  return user;
}
```

</TabItem>
<TabItem value="App.jsx">

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";

import RemoteData, { loader as userLoader } from "./UserData";

const router = createBrowserRouter([
  { path: "/", element: <h1>Home</h1> },
  // highlight-next-line
  { path: "/users", element: <RemoteData />, loader: userLoader },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

</TabItem>

</Tabs>

## Getting URL Path in a Loader

While `useParams` is a hook and can only be used within components, you can access URL parameters directly within a loader function through the `params` object passed to it.

### Getting Current URL Path

```jsx
export async function loader({ params }) {
  // highlight-next-line
  console.log(params);
}
```

```jsx
const router = createBrowserRouter([
  // highlight-next-line
  { path: "/order", element: <Order />, loader: orderLoader },
]);
```

### Getting Dynamic Route Parameters

```jsx
export async function loader({ params }) {
  // highlight-next-line
  console.log(params.orderId);
}
```

```jsx
const router = createBrowserRouter([
  // highlight-next-line
  { path: "/order/:orderId", element: <Order />, loader: orderLoader },
]);
```

## Global Loading State Check

The `useNavigation` hook returns the current navigation state, which can be used to display a global loading indicator while a page is transitioning or data is being loaded.

```jsx
import { Outlet, useNavigation } from "react-router-dom";

import Loader from "./Loader"; // Assuming you have a Loader component

export default function AppLayout() {
  // highlight-next-line
  const navigation = useNavigation();
  // highlight-next-line
  const isLoading = navigation.state === "loading";

  return (
    <>
      {/* highlight-next-line */}
      {isLoading && <Loader />}
      <Outlet />
    </>
  );
}
```
