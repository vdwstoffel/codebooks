---
sidebar_label: "Redux"
sidebar_position: 7
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import BrowserWindow from "@site/src/components/BrowserWindow/BrowserWindow";

# Redux Toolkit

[Redux](https://redux.js.org/introduction/getting-started) is a powerful JavaScript library for managing global application state in a predictable and maintainable way. Redux Toolkit is the official, recommended approach for writing Redux logic, as it simplifies store setup, reduces boilerplate, and includes helpful utilities like `createSlice` and `createAsyncThunk`.

To get started, install Redux Toolkit and the React-Redux bindings:

```bash
npm install @reduxjs/toolkit react-redux
```

## Setting Up the Store

A Redux store is the single source of truth for your application's state. With Redux Toolkit, you can create a store and define "slices" of state, which represent different features or domains of your application.

### Examples

<Tabs>
  <TabItem value="accountSlice.js" label="accountSlice.js">
    A slice is a collection of reducer logic and actions for a single feature.
    The `createSlice` function automatically generates action creators and action types.

    ```jsx
    import { createSlice } from "@reduxjs/toolkit";

    const initialState = {
      balance: 0,
      loan: 0,
      loanReason: "",
    };

    const accountSlice = createSlice({
      name: "account",
      initialState,
      reducers: {
        deposit(state, action) {
          state.balance += action.payload;
        },
        withdraw(state, action) {
          state.balance -= action.payload;
        },
        takeLoan: {
          prepare(amount, reason) {
            return {
              payload: { amount, reason },
            };
          },
          reducer(state, action) {
            if (state.loan > 0) return;
            state.balance += action.payload.amount;
            state.loan = action.payload.amount;
            state.loanReason = action.payload.reason;
          },
        },
        payLoan(state) {
          if (state.loan === 0) return;
          state.balance -= state.loan;
          state.loan = 0;
          state.loanReason = "";
        },
      },
    });

    export const { deposit, withdraw, takeLoan, payLoan } = accountSlice.actions;
    export default accountSlice.reducer;
    ```
  </TabItem>
  <TabItem value="store.js" label="store.js">
    The store brings together all the different reducers from your slices.

    ```js
    import { configureStore } from "@reduxjs/toolkit";
    import accountReducer from "./accountSlice";

    const store = configureStore({
      reducer: {
        account: accountReducer,
      },
    });

    export default store;
    ```
  </TabItem>
  <TabItem value="App.jsx" label="App.jsx">
    To connect your React components to the Redux store, you'll use the `useSelector` hook to read state and the `useDispatch` hook to dispatch actions.


    ```jsx
    // App.jsx
    import AccountDetails from "./AccountDetails";
    import AccountActions from "./AccountActions";

    export default function App() {
      return (
        <>
          <AccountDetails />
          <AccountActions />
        </>
      );
    }

    // AccountDetails.jsx
    import { useSelector } from "react-redux";

    function AccountDetails() {
      const { balance, loan, loanReason } = useSelector((state) => state.account);

      return (
        <div>
          <h2>Account Details</h2>
          <p>Balance: {balance}</p>
          <p>Loan: {loan}</p>
          {loan > 0 && <p>Loan Reason: {loanReason}</p>}
        </div>
      );
    }

    // AccountActions.jsx
    import { useDispatch } from "react-redux";
    import { deposit, withdraw, takeLoan, payLoan } from "./accountSlice";

    function AccountActions() {
      const dispatch = useDispatch();

      const depositHandler = () => dispatch(deposit(50));
      const withdrawHandler = () => dispatch(withdraw(30));
      const takeLoanHandler = () => dispatch(takeLoan(100, "Buy a car"));
      const payLoanHandler = () => dispatch(payLoan());

      return (
        <div>
          <h2>Actions</h2>
          <button onClick={depositHandler}>Deposit $50</button>
          <button onClick={withdrawHandler}>Withdraw $30</button>
          <button onClick={takeLoanHandler}>Take Loan ($100)</button>
          <button onClick={payLoanHandler}>Pay Loan</button>
        </div>
      );
    }
    ```
  </TabItem>
  <TabItem value="main.jsx" label="main.jsx">
    Finally, wrap your entire application with the `Provider` component to make the store available to all components.

    ```jsx
    import { createRoot } from "react-dom/client";
    import { Provider } from "react-redux";
    import App from "./App.jsx";
    import store from "./store.js";

    createRoot(document.getElementById("root")).render(
      <Provider store={store}>
        <App />
      </Provider>
    );
    ```
  </TabItem>
</Tabs>

## Async Operations with `createAsyncThunk`

Redux Toolkit provides `createAsyncThunk` to handle asynchronous logic, such as fetching data from an API. It dispatches actions based on the promise lifecycle (`pending`, `fulfilled`, `rejected`), which you can handle in your slice's `extraReducers`.

### Examples

<Tabs>
  <TabItem value="userSlice.js" label="userSlice.js">
    Here, we define an async thunk to fetch user data and handle the different states of the request.

    ```js
    import { createAsyncThunk, createSlice } from "@reduxjs/toolkit";
    import { getUserByName } from "../helpers/fakeServer";

    const initialState = {
      data: [],
      status: "idle", // 'idle' | 'loading' | 'succeeded' | 'failed'
      error: null,
    };

    // highlight-next-line
    export const fetchUser = createAsyncThunk("user/fetchUser", async (name) => {
      const response = await getUserByName(name);
      return response;
    });

    const userSlice = createSlice({
      name: "user",
      initialState,
      reducers: {},
      // highlight-start
      extraReducers: (builder) => {
        builder
          .addCase(fetchUser.pending, (state) => {
            state.status = "loading";
          })
          .addCase(fetchUser.fulfilled, (state, action) => {
            state.status = "succeeded";
            state.data = action.payload;
          })
          .addCase(fetchUser.rejected, (state, action) => {
            state.status = "failed";
            state.error = action.error.message;
          });
      },
      // highlight-end
    });

    export default userSlice.reducer;
    ```
  </TabItem>
  <TabItem value="UserComponent.jsx" label="UserComponent.jsx">
    In your component, you can dispatch the async thunk and use `useSelector` to display the data, loading status, or error message.

   

    ```jsx
    import { useDispatch, useSelector } from "react-redux";
    import { fetchUser } from "./userSlice";

    export default function UserComponent() {
      const { data, status, error } = useSelector((state) => state.user);
      const dispatch = useDispatch();

      const loadDataHandler = () => dispatch(fetchUser("John"));

      return (
        <div>
          <button onClick={loadDataHandler} disabled={status === 'loading'}>
            {status === 'loading' ? 'Loading...' : 'Load User Data'}
          </button>
          {status === 'succeeded' && data.map((user) => <p key={user.name}>{user.name}</p>)}
          {status === 'failed' && <p style={{ color: 'red' }}>{error}</p>}
        </div>
      );
    }
    ```
  </TabItem>
</Tabs>
