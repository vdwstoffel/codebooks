---
sidebar_label: Volumes
sidebar_position: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Docker Volumes: Persistent Data Storage

Docker containers are designed to be ephemeral, meaning they can be started, stopped, and destroyed without affecting the underlying data. However, applications often need to store data persistently. This is where Docker Volumes come in.

Docker Volumes are the preferred mechanism for persisting data generated by and used by Docker containers. They are completely managed by Docker and are more efficient and performant than bind mounts for most use cases.

## Why Use Volumes?

-   **Data Persistence:** Data stored in volumes persists even if the container is removed.
-   **Data Sharing:** Volumes can be shared among multiple containers.
-   **Performance:** Volumes are often stored on the host filesystem in a Docker-managed area, which can be more performant than writing data directly to the container's writable layer.
-   **Backup/Restore:** Volumes can be easily backed up or migrated.

## Types of Volumes

Docker supports two main types of volumes:

### 1. Named Volumes

Named volumes are the most common and recommended way to persist data. Docker manages their creation, location, and contents. You refer to them by a name.

**Creating a Named Volume:**

```bash
docker volume create my_data_volume
```

**Listing Volumes:**

```bash
docker volume ls
```

**Inspecting a Volume:**

```bash
docker volume inspect my_data_volume
```

**Using a Named Volume with a Container:**

```bash
docker run -d -p 80:80 --name my-web-app -v my_data_volume:/app/data nginx
```

In this example, `my_data_volume` is mounted to `/app/data` inside the `nginx` container.

### 2. Bind Mounts

Bind mounts allow you to mount a file or directory from the host machine directly into a container. While flexible, they are less portable than named volumes because they depend on the host's directory structure.

**Using a Bind Mount with a Container:**

```bash
docker run -d -p 80:80 --name my-web-app -v /path/to/host/data:/app/data nginx
```

In this example, the `/path/to/host/data` directory on your host machine is mounted to `/app/data` inside the `nginx` container.

## Managing Volumes

-   **Remove a Volume:**
    ```bash
    docker volume rm my_data_volume
    ```
    You cannot remove a volume if it's still in use by a container.

-   **Remove All Unused Volumes:**
    ```bash
    docker volume prune
    ```

## Examples

### Persistent Database Data

This example demonstrates how to use a named volume to persist data for a PostgreSQL database, ensuring that your data is not lost when the database container is stopped or removed.

<Tabs>
<TabItem value="docker-compose.yml" label="docker-compose.yml">

```yaml
version: '3.8'

services:
  db:
    image: postgres:13
    container_name: my_postgres_db
    environment:
      POSTGRES_DB: mydatabase
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
    volumes:
      - postgres_data:/var/lib/postgresql/data # Mount named volume for data persistence
    ports:
      - "5432:5432"

volumes:
  postgres_data: # Define the named volume
```

</TabItem>
<TabItem value="Commands" label="Commands">

-   **Start the services:**
    ```bash
    docker compose up -d
    ```
-   **Verify the volume:**
    ```bash
    docker volume ls
    docker volume inspect postgres_data
    ```
-   **Stop and remove the container (data persists):**
    ```bash
    docker compose down
    ```
-   **Start again (data should still be there):**
    ```bash
    docker compose up -d
    ```

</TabItem>
</Tabs>
